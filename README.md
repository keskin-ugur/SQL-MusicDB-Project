# SQL Music Service Analysis Project

This repository contains a complete SQL project that models a music streaming service. The project demonstrates database design, ETL (Extract, Transform, Load) processes, and data analysis using SQL Server.

A raw dataset of over 100,000 tracks from Kaggle was imported, cleaned, normalized into a relational database, and then analyzed.

## Key Skills Demonstrated

* **Database Design:** Creating a normalized, relational schema with 6 tables, primary keys, and foreign keys.
* **ETL (Extract, Transform, Load):**
    * Importing a large, raw `.csv` file (`RawTracksData`) using SSMS.
    * Writing T-SQL scripts to clean, transform, and load the raw data into the normalized production tables (`Artists`, `Albums`, `Tracks`).
    * Handling data cleaning issues like `NULL` values and `truncated` (oversized) data.
* **Data Analysis:** Writing complex analytical queries using `JOIN`s and `GROUP BY` to answer business questions.
* **Data Simulation:** Simulating user application data (`Users`, `Playlists`) to perform realistic analysis on "many-to-many" relationships.

---

## Database Schema (ERD)

The database is normalized to reduce redundancy and improve data integrity.

* **`Artists`**: Stores unique artist information.
* **`Albums`**: Stores unique albums, linked to an `ArtistID`.
* **`Tracks`**: Stores individual tracks, linked to `AlbumID` and `ArtistID`.
* **`Users`**: Stores application user data (simulated).
* **`Playlists`**: Stores playlists created by users, linked to `UserID`.
* **`Playlist_Tracks`**: A junction (many-to-many) table that links `Playlists` to `Tracks`.

---

## How to Run This Project

1.  **Prerequisites:**
    * Microsoft SQL Server (Developer Edition recommended).
    * SQL Server Management Studio (SSMS).
    * The Kaggle dataset: [Spotify Tracks Dataset](https://www.kaggle.com/datasets/maharshipandya/-spotify-tracks-dataset) (download `dataset.csv`).

2.  **Step 1: Setup & Schema Creation**
    * Create a new database (e.g., `MusicServiceDB`).
    * Run the script `01_Schema.sql` to create all 6 tables.

3.  **Step 2: Data Import (ETL)**
    * In SSMS, right-click your database -> `Tasks` -> `Import Flat File...`.
    * Import the `dataset.csv` file into a **new** table named `RawTracksData`.
    * **Important:** In the "Modify Columns" step, change all `nvarchar` columns (like `artists`, `album_name`, `track_name`) to `nvarchar(MAX)` to prevent errors.
    * Run the `02_ETL_Data_Load.sql` script. This will populate `Artists`, `Albums`, and `Tracks` from `RawTracksData`.

4.  **Step 3: Simulation & Analysis**
    * Run the `03_Simulation_and_Analysis.sql` script. This will:
        1.  Create sample users and playlists.
        2.  Link real tracks to those playlists.
        3.  Run the final analysis queries.

---

## Example Analysis Queries & Results

These are the final reports generated by the project.

### Query 1: Top Popular Tracks (Most Added to Playlists)

```sql
-- Finds tracks most frequently added to playlists.
SELECT
    T.TrackName,
    A.ArtistName,
    COUNT(PT.TrackID) AS PlaylistCount
FROM
    Playlist_Tracks AS PT
JOIN
    Tracks AS T ON PT.TrackID = T.TrackID
JOIN
    Artists AS A ON T.ArtistID = A.ArtistID
GROUP BY
    T.TrackID, T.TrackName, A.ArtistName
ORDER BY
    PlaylistCount DESC;
```

**Result (based on simulated data):**

| TrackName | ArtistName | PlaylistCount |
| :--- | :--- | :--- |
| Blinding Lights | The Weeknd | 2 |
| Bohemian Rhapsody - Remastered 2011 | Queen | 2 |
| Smells Like Teen Spirit | Nirvana | 2 |
| ... (others) ... | ... | 1 |

### Query 2: Most Active Users (by Playlist Creation)

```sql
-- Finds users who have created the most playlists.
SELECT
    U.Username,
    COUNT(P.PlaylistID) AS TotalPlaylists
FROM
    Users AS U
JOIN
    Playlists AS P ON U.UserID = P.UserID
GROUP BY
    U.UserID, U.Username
ORDER BY
    TotalPlaylists DESC;
```

**Result:**

| Username | TotalPlaylists |
| :--- | :--- |
| jane_smith | 2 |
| john_doe | 1 |

| music_lover_99 | 1 |
